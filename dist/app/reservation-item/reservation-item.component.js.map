{"version":3,"sources":["../src/app/reservation-item/reservation-item.component.ts"],"names":[],"mappings":";;;;;;;;;;AAAA,uBAA+C,eAAe,CAAC,CAAA;AAC/D,yBAA+C,iBAAiB,CAAC,CAAA;AAEjE,8BAA2B,yBAAyB,CAAC,CAAA;AACrD,+BAA4B,0BAA0B,CAAC,CAAA;AA0BvD;IAOI,YAAoB,UAAsB,EACtB,WAAwB,EACvB,KAAqB,EACrB,MAAc;QAHf,eAAU,GAAV,UAAU,CAAY;QACtB,gBAAW,GAAX,WAAW,CAAa;QACvB,UAAK,GAAL,KAAK,CAAgB;QACrB,WAAM,GAAN,MAAM,CAAQ;IACnC,CAAC;IAED,QAAQ;QACN,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE;YAC5C,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;QAC3C,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;QACd,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;IAChC,CAAC;IAEO,YAAY,CAAC,WAAmB,EAAE,QAAQ;QAChD,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC;aACvC,SAAS,CAAC,QAAQ;YACjB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;YACzB,QAAQ,EAAE,CAAA;QACZ,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,SAAS,CAAC,QAAgB;QAChC,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,QAAQ,CAAC;aACjC,SAAS,CAAC,KAAK;YACd,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACrB,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,aAAa,CAAC,KAAK;QACzB,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;YACxB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;QAC7D,CAAC;IACH,CAAC;IAEO,gBAAgB,CAAC,KAAK;QAC5B,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;IACnC,CAAC;IAEO,gBAAgB,CAAC,KAAK;QAC5B,OAAO,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;IACnC,CAAC;AACL,CAAC;AA9CG;IAAC,YAAK,EAAE;;oDAAA;AA1BZ;IAAC,gBAAS,CAAC;QACP,QAAQ,EAAE,MAAM,CAAC,EAAE;QACnB,QAAQ,EAAE,kBAAkB;QAC5B,QAAQ,EAAC;;;;;;;;;;;;;;;;;KAiBR;QACD,SAAS,EAAE,CAAC,6BAA6B,CAAC;QAC1C,SAAS,EAAE,CAAE,wBAAU,EAAE,0BAAW,CAAE;KACzC,CAAC;;mBAAA;AACW,uBAAe,kBAgD3B,CAAA","file":"app/reservation-item/reservation-item.component.js","sourceRoot":"/source/","sourcesContent":["import { Component, Input, HostListener } from '@angular/core';\nimport { Router, ActivatedRoute, Params } from '@angular/router';\n\nimport { ApiService } from '../services/api.service';\nimport { AuthService } from '../services/auth.service';\n\n@Component({\n    moduleId: module.id,\n    selector: 'reservation-item',\n    template:`\n    <div *ngIf='movie && showtime' class='reservation-wrapper'>\n      <div class='reservation-header' [ngStyle]=\"{\n        'background': 'linear-gradient( rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5) ), url(' + movie.backdrop_url + ')', \n        'background-position':'center', \n        'background-size':'cover'}\" (click)='headerClicked($event)'>\n        <div *ngIf='movie' class='title'>{{movie.title}}</div>\n        <span *ngIf='showtime' class='date'>{{showtime.time.replace('T', ' ').replace('Z', '') | date: 'EEEE, MMMM d'}}</span>\n        <span *ngIf='showtime' class='time'>{{showtime.time.replace('T', ' ').replace('Z', '') | date: 'h:m a'}}</span>\n      </div>\n      <div class='reservation-sub'>Admit</div>\n      <div>\n        <button class='reservation-button' (click)='decrementClicked($event)'>-</button>\n        <span class='reservation-quantity'>{{reservation.quantity}}</span>\n        <button class='reservation-button' (click)='incrementClicked($event)'>+</button>\n      </div>\n    </div>\n    `,\n    styleUrls: ['reservation-item.styles.css'],\n    providers: [ ApiService, AuthService ]\n})\nexport class ReservationItem {\n  \n    @Input() reservation: any;\n    \n    showtime: any;\n    movie: any;\n    \n    constructor (public apiService: ApiService,\n                 public authService: AuthService,\n                 private route: ActivatedRoute,\n                 private router: Router){ \n    }\n    \n    ngOnInit() {\n      this.loadShowtime(this.reservation.showtime_id, function() {\n          this.loadMovie(this.showtime.movie_id);\n      }.bind(this));\n      console.log(this.reservation);\n    }\n    \n    private loadShowtime(showtime_id: number, complete) {\n      this.apiService.getShowtime(showtime_id)\n      .subscribe(showtime => {\n        this.showtime = showtime;\n        complete()\n      });\n    }\n    \n    private loadMovie(movie_id: number) {\n      this.apiService.getMovie(movie_id)\n      .subscribe(movie => {\n        this.movie = movie;\n      });\n    }\n    \n    private headerClicked(event) {\n      if (this.movie.movie_id) {\n        this.router.navigate(['/home/movie', this.movie.movie_id]);\n      }\n    }\n    \n    private incrementClicked(event) {\n      console.log('Increment Clicked');\n    }\n    \n    private decrementClicked(event) {\n      console.log('Decrement Clicked');\n    }\n}"]}